# Wandar Backend

This is the backend for the Wandar Tour Search Engine project, built with Node.js, Express.js, and TypeScript. It uses Prisma ORM to manage the database.

## Tech Stack

- Node.js & Express.js â€“ Backend framework
- TypeScript â€“ Strongly typed JavaScript
- Prisma ORM â€“ Database management
- PostgreSQL

## Setup & Installation

1. Clone the repository:

   ```sh
    https://github.com/KulturExplora/toursearchengine.git
   cd toursearchengine/backend

   ```

2. Install dependencies:

```sh
npm install
```

3. Set up environment variables: create a .env file in the `backend/root` directory and add the following environment variables:

```sh
# Environment Variables

API_KEY=
SUPABASE_URL=
SUPABASE_ANON_KEY=
SUPABASE_SERVICE_ROLE_KEY=
SUPABASE_JWT_SECRET=
SUPABASE_USER=


# Connect to Supabase via connection pooling with Supavisor.

DATABASE_URL=

# Direct connection to the database. Used for migrations.

DIRECT_URL=

# App variables

PORT=
```

**Important Notes**:

- The values required for testing and development environments are available on the Wandar Confluence page.
- Ensure you have the correct access permissions to retrieve these credentials.
- Never commit your .env file to version control to keep sensitive data secure.

4. Migrate the database:

```sh
npx prisma migrate dev
```

5. Run the development server with TypeScript:

```sh
npm run dev
```

## Available Scripts

- npm run dev â€“ Start the server in development mode with ts-node
- npm run build â€“ Compile TypeScript to JavaScript
- npm start â€“ Run the production server using the compiled JavaScript

## API Documentation

(TBD â€“ Add endpoints as they are implemented)

## Project Structure (Work in Progress)

```sh
ðŸ“¦ my-supabase-app
â”£ ðŸ“‚ prisma
â”ƒ â”£ ðŸ“œ schema.prisma      # Prisma schema (DB models & config)
â”ƒ â”£ ðŸ“œ migrations/        # Migration files (generated by Prisma)
â”ƒ â”— ðŸ“œ seed.ts            # Seeding script (optional)
â”£ ðŸ“‚ src
â”ƒ â”£ ðŸ“‚ config
â”ƒ â”ƒ â”— ðŸ“œ supabase.ts      # Supabase client setup
â”ƒ â”£ ðŸ“‚ db
â”ƒ â”ƒ â”— ðŸ“œ prisma.ts        # Prisma client setup
â”ƒ â”£ ðŸ“‚ models
â”ƒ â”ƒ â”— ðŸ“œ user.model.ts    # User model
â”ƒ â”£ ðŸ“‚ repositories
â”ƒ â”ƒ â”— ðŸ“œ user.repo.ts     # Database operations (CRUD)
â”ƒ â”£ ðŸ“‚ services
â”ƒ â”ƒ â”— ðŸ“œ user.service.ts  # Business logic (authentication, etc.)
â”ƒ â”£ ðŸ“‚ controllers
â”ƒ â”ƒ â”— ðŸ“œ user.controller.ts # API routes logic
â”ƒ â”£ ðŸ“‚ routes
â”ƒ â”ƒ â”— ðŸ“œ user.routes.ts   # Express route definitions
â”ƒ â”£ ðŸ“‚ middleware
â”ƒ â”ƒ â”— ðŸ“œ auth.middleware.ts # Auth middleware (JWT, session, etc.)
â”ƒ â”£ ðŸ“‚ utils
â”ƒ â”ƒ â”— ðŸ“œ helpers.ts       # Utility functions (formatting, etc.)
â”ƒ â”£ ðŸ“‚ types
â”ƒ â”ƒ â”— ðŸ“œ user.types.ts    # TypeScript types/interfaces
â”ƒ â”£ ðŸ“œ app.ts             # Express app setup
â”ƒ â”— ðŸ“œ server.ts          # Server entry point
â”£ ðŸ“œ .env                 # Environment variables
â”£ ðŸ“œ .gitignore           # Git ignore file
â”£ ðŸ“œ package.json         # Dependencies & scripts
â”£ ðŸ“œ tsconfig.json        # TypeScript config
â”— ðŸ“œ README.md            # Documentation
```
